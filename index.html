import React, { useMemo, useState } from "react";
import {
  ShoppingCart,
  Sun,
  Moon,
  Leaf,
  Heart,
  Sparkles,
  MapPin,
  Phone,
  Mail,
  Instagram,
  Star,
  Factory,
  BookOpen,
  Handshake,
  IndianRupee,
} from "lucide-react";
import { Button } from "@/components/ui/button";
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { Input } from "@/components/ui/input";
import { Textarea } from "@/components/ui/textarea";
import { Badge } from "@/components/ui/badge";
import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs";
import { Switch } from "@/components/ui/switch";
import { motion } from "framer-motion";

// --- Helpers ---
const cn = (...c) => c.filter(Boolean).join(" ");

const flavors = [
  { name: "Meetha Gulkand", desc: "Classic paan vibe. Soft, rosy, gently sweet.", badge: "Best Seller" },
  { name: "Dry Fruit Crunch", desc: "Dates packed with almond + cashew + pista.", badge: "Power Bite" },
  { name: "Coconut Snow", desc: "Rolled in desiccated coconut for a mellow finish.", badge: "Smooth" },
  { name: "Choco Mint", desc: "Hint of cocoa with cool cardamom + saunf.", badge: "Limited" },
];

const faqs = [
  { q: "What is Date Wala Paan?", a: "A stuffed date (khajur) wrapped in the paan experience—gulkand, saunf, cardamom, and optional toppings. 100% tobacco‑free." },
  { q: "Shelf life?", a: "7–10 days refrigerated. Best consumed fresh within 72 hours." },
  { q: "Is it vegetarian?", a: "Yes. Pure veg. No eggs. No preservatives in the fresh variant." },
  { q: "Do you do bulk orders?", a: "Yes. Birthdays, college events, corporate hampers. MOQ 50 pieces. Custom sleeves available." },
];

const testimonials = [
  { name: "Aarav • MBA '26", text: "Perfect after‑meal bite. Not heavy like dessert, not boring like mints." },
  { name: "Mira • CS Grad", text: "Tried Dry Fruit Crunch. Killer combo with coffee." },
  { name: "Prof. Nair", text: "Neat campus product. Hygienic, quick, repeatable." },
];

const Feature = ({ icon: Icon, title, text }) => (
  <motion.div whileHover={{ scale: 1.03 }}>
    <Card className="shadow-sm">
      <CardHeader className="flex flex-row items-center gap-3">
        <div className="p-2 rounded-xl bg-gradient-to-r from-emerald-200 to-emerald-400 dark:from-emerald-900/40 dark:to-emerald-600/30">
          <Icon className="h-5 w-5 text-emerald-800 dark:text-emerald-200" />
        </div>
        <CardTitle className="text-base">{title}</CardTitle>
      </CardHeader>
      <CardContent className="text-sm text-muted-foreground">{text}</CardContent>
    </Card>
  </motion.div>
);

const FlavorCard = ({ f }) => (
  <motion.div whileHover={{ scale: 1.05 }} transition={{ type: "spring", stiffness: 200 }}>
    <Card className="hover:shadow-lg transition-shadow">
      <CardHeader>
        <div className="flex items-center gap-2">
          <Leaf className="h-4 w-4 text-emerald-600" />
          <CardTitle className="text-lg">{f.name}</CardTitle>
          <Badge variant="secondary" className="ml-auto">{f.badge}</Badge>
        </div>
      </CardHeader>
      <CardContent>
        <p className="text-sm text-muted-foreground">{f.desc}</p>
        <div className="mt-4 flex items-center justify-between">
          <div className="flex items-center gap-1 text-amber-500">
            {Array.from({ length: 5 }).map((_, i) => (
              <Star key={i} className="h-4 w-4 fill-current" />
            ))}
          </div>
          <Button size="sm" className="gap-2"><ShoppingCart className="h-4 w-4" /> Add</Button>
        </div>
      </CardContent>
    </Card>
  </motion.div>
);

const HeroMark = () => (
  <span className="relative inline-block">
    <span className="relative z-10">Date Wala Paan</span>
    <span className="absolute -inset-1 -skew-x-6 bg-gradient-to-r from-emerald-300/70 to-amber-200/60 dark:from-emerald-600/50 dark:to-amber-500/30 rounded-lg" />
  </span>
);

export default function Site() {
  const [dark, setDark] = useState(true);
  const year = useMemo(() => new Date().getFullYear(), []);

  return (
    <div className={cn("min-h-screen antialiased font-[Manrope]", dark ? "dark" : "")}> 
      <div className="bg-background text-foreground transition-colors">
        {/* Nav */}
        <header className="sticky top-0 z-50 border-b bg-background/80 backdrop-blur">
          <div className="mx-auto max-w-6xl px-4 py-3 flex items-center gap-3">
            <div className="flex items-center gap-2 font-bold text-xl">
              <Leaf className="h-6 w-6 text-emerald-600" />
              <span>Date Wala Paan</span>
            </div>
            <nav className="ml-auto hidden md:flex items-center gap-6 text-sm">
              <a href="#flavors" className="hover:text-emerald-600">Flavors</a>
              <a href="#story" className="hover:text-emerald-600">Story</a>
              <a href="#pricing" className="hover:text-emerald-600">Pricing</a>
              <a href="#wholesale" className="hover:text-emerald-600">Bulk</a>
              <a href="#contact" className="hover:text-emerald-600">Contact</a>
            </nav>
            <div className="ml-3 flex items-center gap-2">
              <Switch checked={dark} onCheckedChange={setDark} />
              {dark ? <Moon className="h-4 w-4" /> : <Sun className="h-4 w-4" />}
              <Button className="ml-2 hidden sm:inline-flex gap-2 animate-bounce"><ShoppingCart className="h-4 w-4" />Order</Button>
            </div>
          </div>
        </header>

        {/* Hero */}
        <section className="mx-auto max-w-6xl px-4 py-16 grid md:grid-cols-2 gap-10 items-center bg-gradient-to-br from-emerald-50 via-white to-amber-50 dark:from-emerald-950 dark:via-black dark:to-amber-950 rounded-3xl">
          <div>
            <Badge className="bg-emerald-600">100% Tobacco‑Free</Badge>
            <motion.h1
              initial={{ opacity: 0, y: 20 }}
              animate={{ opacity: 1, y: 0 }}
              transition={{ duration: 0.6 }}
              className="mt-4 text-4xl md:text-5xl font-extrabold leading-tight"
            >
              Fresh. Fun. Healthy. <br />
              Meet <HeroMark />
            </motion.h1>
            <p className="mt-4 text-muted-foreground">
              A modern after‑meal bite: premium dates stuffed with gulkand, saunf, cardamom, and
              crunchy nuts. Campus‑born in Pune. Made fresh daily.
            </p>
            <div className="mt-6 flex flex-wrap gap-3">
              <Button className="gap-2"><ShoppingCart className="h-4 w-4" /> Order a Box</Button>
              <Button variant="outline">See Ingredients</Button>
            </div>
          </div>
          <motion.div initial={{ scale: 0.8, opacity: 0 }} animate={{ scale: 1, opacity: 1 }} transition={{ duration: 0.7 }}>
            <div className="aspect-[4/3] rounded-3xl bg-gradient-to-br from-emerald-100 to-amber-100 dark:from-emerald-900/30 dark:to-amber-900/20 border flex items-center justify-center">
              <svg viewBox="0 0 200 200" className="w-2/3">
                <defs>
                  <linearGradient id="g1" x1="0" x2="1">
                    <stop offset="0%" stopColor="#065f46" />
                    <stop offset="100%" stopColor="#10b981" />
                  </linearGradient>
                </defs>
                <path d="M100 30 C 40 60, 40 140, 100 170 C 160 140, 160 60, 100 30 Z" fill="url(#g1)" />
                <ellipse cx="100" cy="100" rx="35" ry="48" fill="#8b5e34" />
                <circle cx="90" cy="95" r="3" fill="#111" />
                <circle cx="110" cy="95" r="3" fill="#111" />
                <path d="M90 112 Q100 120 110 112" stroke="#111" strokeWidth="3" fill="none" />
              </svg>
            </div>
          </motion.div>
        </section>

        {/* Features, Flavors, etc remain same (use hover + motion like above) */}
        {/* ... keep rest of sections unchanged, just sprinkle motion + hover like FlavorCard */}

        {/* Footer */}
        <footer className="border-t">
          <div className="mx-auto max-w-6xl px-4 py-10 text-sm text-muted-foreground flex flex-col md:flex-row items-center gap-3 md:gap-6">
            <div className="flex items-center gap-2"><Leaf className="h-4 w-4 text-emerald-600" /> Date Wala Paan</div>
            <div className="md:ml-auto">© {year} Date Wala Paan. All rights reserved.</div>
          </div>
        </footer>
      </div>
    </div>
  );
}
